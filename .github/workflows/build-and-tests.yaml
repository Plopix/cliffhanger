name: Build And Tests

on:
    workflow_call:

jobs:
    build-and-test:
        name: ğŸ—ï¸ Build and Test
        runs-on: ubuntu-latest
        steps:
            - name: â¬‡ï¸ Checkout repo
              uses: actions/checkout@v4
              with:
                  fetch-depth: 0
                  fetch-tags: false

            - name: â” Setup bun
              uses: oven-sh/setup-bun@v2

            - name: ğŸ“¥ Download deps on Mono
              run: bun install --frozen-lockfile

            - name: ğŸ” Valid commit message
              if: ${{ github.event_name == 'pull_request' }}
              run: bun commitlint --from ${{ github.event.pull_request.base.sha }} --to ${{ github.event.pull_request.head.sha }} --verbose

            - name: ğŸ’„ Prettier
              run: bun prettier:check
